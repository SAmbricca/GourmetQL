<ion-header class="ion-no-border header-transparente">
  <ion-toolbar></ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true" class="login-content">
  <div class="login-container">

    <div class="logo-container">
      <img src="./assets/logo.png" class="logo">
      <h1 class="app-title">Gourmet QL</h1>
    </div>

    <div class="login-form">
      <ion-card class="login-card">
        <ion-card-content>
          <ion-item fill="outline" class="input-item">
            <ion-label position="floating">Correo Electrónico</ion-label>
            <ion-input type="email" name="email" [(ngModel)]="email"></ion-input>
          </ion-item>

          <ion-item fill="outline" class="input-item">
            <ion-label position="floating">Contraseña</ion-label>
            <ion-input type="password" name="password" [(ngModel)]="contrasenia"></ion-input>
          </ion-item>

          <ion-button
            expand="block"
            size="large"
            class="login-button"
            (click)="iniciarSesion()">
            <ion-icon name="log-in" slot="start"></ion-icon>
            Iniciar Sesión
          </ion-button>

          <ion-button
            expand="block"
            size="large"
            class="login-button btn-google"
            (click)="loginGoogle()">
            <ion-icon name="logo-google" slot="start"></ion-icon>
            Google
          </ion-button>

          <ion-button
            expand="block"
            fill="solid"
            size="large"
            class="quick-login-btn btn-anonimo"
            (click)="abrirModalAnonimo()">
            Cliente Anónimo
          </ion-button>
        </ion-card-content>
      </ion-card>
    </div>

    <div class="separator">
      <hr class="separator-line">
      <span class="separator-text">Accesos Directos</span>
      <hr class="separator-line">
    </div>

    <div class="quick-login">
      <ion-card class="quick-login-card">
        <ion-card-content class="quick-buttons-container">
          @for (usuario of usuariosRapidos; track usuario) {
            <ion-button expand="block" fill="outline" class="quick-login-btn"
              [class]="'btn-' + usuario.perfil.replace('ñ', 'n')"
              (click)="loginRapido(usuario)">
              {{ usuario.perfil }}
            </ion-button>
          }
        </ion-card-content>
      </ion-card>
    </div>

  </div>

  <ion-modal [isOpen]="mostrarModalAnonimo" (didDismiss)="cerrarModalAnonimo()">
    <ng-template>
      <ion-content class="modal-anonimo-content">
        <div class="modal-anonimo-container">
           <div class="modal-header">
            <h2>Registro Cliente</h2>
            <ion-button fill="clear" (click)="cerrarModalAnonimo()">
              <ion-icon name="close" slot="icon-only"></ion-icon>
            </ion-button>
          </div>
          <div class="modal-body">
            <div class="foto-container">
              @if (fotoAnonimo) {
                <img [src]="fotoAnonimo" class="foto-preview">
              } @else {
                <div class="foto-placeholder">
                  <ion-icon name="camera" size="large"></ion-icon>
                  <p>Sin foto</p>
                </div>
              }
            </div>
            <div class="botones-foto">
              <ion-button expand="block" (click)="tomarFoto()" [disabled]="procesandoRegistro">
                <ion-icon name="camera" slot="start"></ion-icon> Tomar Foto
              </ion-button>
            </div>
            <ion-item fill="outline" class="input-nombre">
              <ion-label position="floating">Nombre</ion-label>
              <ion-input type="text" [(ngModel)]="nombreAnonimo" [disabled]="procesandoRegistro"></ion-input>
            </ion-item>
            <ion-button expand="block" size="large" class="btn-registrar" (click)="registrarClienteAnonimo()"
              [disabled]="procesandoRegistro || !nombreAnonimo || !fotoAnonimo">
              {{ procesandoRegistro ? 'Registrando...' : 'Ingresar' }}
            </ion-button>
          </div>
        </div>
      </ion-content>
    </ng-template>
  </ion-modal>
</ion-content>